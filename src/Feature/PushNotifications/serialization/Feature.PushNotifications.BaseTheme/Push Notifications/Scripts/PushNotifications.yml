---
ID: "3a32da62-5934-47cf-b99a-5ab990804563"
Parent: "6a985ab5-dbbc-4b89-9bbf-4cb900a4a755"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Base Themes/Push Notifications/Scripts/PushNotifications
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/3A32DA62593447CFB99A5AB990804563.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "42a4fdc0-2c33-4560-9072-0f392884b3bc"
  Value: 77u/dmFyIFNGID0gU0YgfHwge307DQpTRi5QdXNoTm90ZmljYXRpb25zID0gKGZ1bmN0aW9uICgpIHsNCg0KICAgIGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkgew0KICAgICAgICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2UgV29ya2VyIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLicpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCEoJ1B1c2hNYW5hZ2VyJyBpbiB3aW5kb3cpKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnUHVzaCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgYnJvd3NlcicpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXNrUGVybWlzc2lvbigpIHsNCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25SZXN1bHQgPSBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oZnVuY3Rpb24gKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAocGVybWlzc2lvblJlc3VsdCkgew0KICAgICAgICAgICAgICAgIHBlcm1pc3Npb25SZXN1bHQudGhlbihyZXNvbHZlLCByZWplY3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBlcm1pc3Npb25SZXN1bHQpIHsNCiAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvblJlc3VsdCAhPT0gJ2dyYW50ZWQnKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2Ugd2VyZW5cJ3QgZ3JhbnRlZCBwZXJtaXNzaW9uLicpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHN1YnNjcmliZVVzZXJUb1B1c2gocHVibGljS2V5KSB7DQogICAgICAgIHJldHVybiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL2NvbnRlbnQvRmVhdHVyZS9QdXNoTm90aWZpY2F0aW9ucy9zZXJ2aWNlLXdvcmtlci5qcycpDQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7DQoNCiAgICAgICAgICAgICAgICB2YXIgc2VydmljZVdvcmtlcjsNCiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmluc3RhbGxpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VydmljZVdvcmtlciA9IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nOw0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXIgaW5zdGFsbGluZycpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnaXN0cmF0aW9uLndhaXRpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VydmljZVdvcmtlciA9IHJlZ2lzdHJhdGlvbi53YWl0aW5nOw0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXIgaW5zdGFsbGVkICYgd2FpdGluZycpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkgew0KICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlV29ya2VyID0gcmVnaXN0cmF0aW9uLmFjdGl2ZTsNCiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIGFjdGl2ZScpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpYmVPcHRpb25zID0gew0KICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uU2VydmVyS2V5OiB1cmxCYXNlNjRUb1VpbnQ4QXJyYXkoDQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXkNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PSAiYWN0aXZhdGVkIikgew0KICAgICAgICAgICAgICAgICAgICAvL0lmIHB1c2ggc3Vic2NyaXB0aW9uIHdhc250IGRvbmUgeWV0IGhhdmUgdG8gZG8gaGVyZQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic3cgYWxyZWFkeSBhY3RpdmF0ZWQgLSBEbyB3YXRldmVyIG5lZWRlZCBoZXJlIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHN1YnNjcmliZU9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcigic3RhdGVjaGFuZ2UiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic3cgc3RhdGVjaGFuZ2UgOiAiLCBlLnRhcmdldC5zdGF0ZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5zdGF0ZSA9PSAiYWN0aXZhdGVkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHB1c2hNYW5nZXIgZm9yIHN1YnNjcmliaW5nIGhlcmUuDQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaWJlT3B0aW9ucyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHVybEJhc2U2NFRvVWludDhBcnJheSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljS2V5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkp1c3Qgbm93IGFjdGl2YXRlZC4gbm93IHdlIGNhbiBzdWJzY3JpYmUgZm9yIHB1c2ggbm90aWZpY2F0aW9uIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwdXNoU3Vic2NyaXB0aW9uID0gcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZShzdWJzY3JpYmVPcHRpb25zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBQdXNoU3Vic2NyaXB0aW9uOiAnLCBKU09OLnN0cmluZ2lmeShwdXNoU3Vic2NyaXB0aW9uKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwdXNoU3Vic2NyaXB0aW9uKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIFB1c2hTdWJzY3JpcHRpb246ICcsIEpTT04uc3RyaW5naWZ5KHB1c2hTdWJzY3JpcHRpb24pKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcHVzaFN1YnNjcmlwdGlvbjsNCiAgICAgICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNlbmRTdWJzY3JpcHRpb25Ub0JhY2tFbmQoc3Vic2NyaXB0aW9uLCBnb2FsSWQsIGNvbmZpZ0lkKSB7DQogICAgICAgIHZhciBkYXRhID0gew0KICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sDQogICAgICAgICAgICBnb2FsSWQ6IGdvYWxJZCwNCiAgICAgICAgICAgIGNvbmZpZ0lkOiBjb25maWdJZA0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gZmV0Y2goJy9hcGkvc2YvMS4wL3B1c2hOb3RpZmljYXRpb24vc3Vic2NyaWJlJywgew0KICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpDQogICAgICAgIH0pDQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmFkIHN0YXR1cyBjb2RlIGZyb20gc2VydmVyLicpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHN1YnNjcmliZShwdWJsaWNLZXksIGdvYWxJZCwgY29uZmlnSWQpIHsNCiAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCgpKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnTm90IFN1cHBvcnRlZC4nKTsNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB9DQogICAgICAgIGlmICghYXNrUGVybWlzc2lvbigpKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnUGVybWlzc2lvbiBEZW5pZWQnKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgc3Vic2NyaWJlVXNlclRvUHVzaChwdWJsaWNLZXkpLnRoZW4oZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgew0KICAgICAgICAgICAgc2VuZFN1YnNjcmlwdGlvblRvQmFja0VuZChzdWJzY3JpcHRpb24sIGdvYWxJZCwgY29uZmlnSWQpOw0KICAgICAgICB9KTsNCiAgICAgICAgDQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXJsQmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NFN0cmluZykgew0KICAgICAgICBjb25zdCBwYWRkaW5nID0gJz0nLnJlcGVhdCgoNCAtIGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSAlIDQpOw0KICAgICAgICBjb25zdCBiYXNlNjQgPSAoYmFzZTY0U3RyaW5nICsgcGFkZGluZykNCiAgICAgICAgICAgIC5yZXBsYWNlKC9cLS9nLCAnKycpDQogICAgICAgICAgICAucmVwbGFjZSgvXy9nLCAnLycpDQogICAgICAgICAgICA7DQogICAgICAgIGNvbnN0IHJhd0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpOw0KICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKFsuLi5yYXdEYXRhXS5tYXAoKGNoYXIpID0+IGNoYXIuY2hhckNvZGVBdCgwKSkpOw0KICAgIH0NCg0KICAgIHJldHVybiB7DQogICAgICAgIGlzU3VwcG9ydGVkOiBpc1N1cHBvcnRlZCwNCiAgICAgICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUNCiAgICB9DQoNCn0pKCk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 5112
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200409T182021Z
